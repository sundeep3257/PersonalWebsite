{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-image">
        <img src="{{ url_for('serve_graphics', filename='Hero Image - Personal Website.png') }}" alt="Hero">
    </div>
    <div class="hero-overlay">
        <h1 class="hero-title">Hi, I'm Sundeep</h1>
        <p class="hero-subtitle">A medical student with a passion for automation, machine learning, and web development</p>
    </div>
</section>

<!-- Skills Section -->
<section id="skills" class="skills-section">
    <div class="container">
        <h2 class="section-title">Skills</h2>
        <div class="skills-grid">
            <div class="skill-box">
                <h3 class="skill-title">Automated Image Analysis</h3>
                <ul class="skill-list">
                    <li>computer vision</li>
                    <li>region segmentation</li>
                    <li>landmark detection</li>
                    <li>object classification</li>
                </ul>
            </div>
            <div class="skill-box">
                <h3 class="skill-title">Machine Learning</h3>
                <ul class="skill-list">
                    <li>risk stratification</li>
                    <li>outcome prediction</li>
                    <li>survival modeling</li>
                    <li>disease/patient subtyping</li>
                </ul>
            </div>
            <div class="skill-box">
                <h3 class="skill-title">Web Development</h3>
                <ul class="skill-list">
                    <li>backend development</li>
                    <li>UI/UX design</li>
                    <li>app deployment</li>
                    <li>database design and security</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- Projects Section -->
<section id="projects" class="projects-section">
    <div class="container">
        <h2 class="section-title">Projects</h2>
        
        <div class="carousels-container">
            <!-- Technology for Medicine Carousel -->
            <div class="carousel-section">
                <h3 class="carousel-title">Technology for Medicine</h3>
                <div class="project-carousel" data-carousel="medicine">
                    <button class="carousel-btn carousel-prev" aria-label="Previous">‹</button>
                    <div class="carousel-track">
                        {% for project in projects_medicine %}
                        <div class="project-card">
                            <a href="{{ url_for('project_detail', slug=project.slug) }}" class="project-link">
                                <img src="{{ project.preview_image_path|asset_url }}" alt="{{ project.title }}" class="project-image">
                                <div class="project-info">
                                    <h4 class="project-title">{{ project.title }}</h4>
                                    <p class="project-summary">{{ project.preview_summary }}</p>
                                </div>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-btn carousel-next" aria-label="Next">›</button>
                </div>
            </div>

            <!-- Creative Projects Carousel -->
            <div class="carousel-section">
                <h3 class="carousel-title">Creative Projects</h3>
                <div class="project-carousel" data-carousel="creative">
                    <button class="carousel-btn carousel-prev" aria-label="Previous">‹</button>
                    <div class="carousel-track">
                        {% for project in projects_creative %}
                        <div class="project-card">
                            <a href="{{ url_for('project_detail', slug=project.slug) }}" class="project-link">
                                <img src="{{ project.preview_image_path|asset_url }}" alt="{{ project.title }}" class="project-image">
                                <div class="project-info">
                                    <h4 class="project-title">{{ project.title }}</h4>
                                    <p class="project-summary">{{ project.preview_summary }}</p>
                                </div>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                    <button class="carousel-btn carousel-next" aria-label="Next">›</button>
                </div>
            </div>
        </div>

        <div class="view-all-projects">
            <a href="{{ url_for('projects_archive') }}" class="btn-primary">View all projects</a>
        </div>
    </div>
</section>

<!-- Publications Section -->
<section id="publications" class="publications-section">
    <div class="container">
        <h2 class="section-title">Featured Publications</h2>
        <div class="publications-viewer">
            <div class="publications-container">
                {% for publication in publications %}
                <div class="publication-card" data-publication-id="{{ publication.id }}">
                    <div class="publication-spine"></div>
                    <div class="publication-content">
                        <h3 class="publication-title">{{ publication.title }}</h3>
                        <p class="publication-journal">{{ publication.journal }}</p>
                        <p class="publication-date">{{ publication.publication_date }}</p>
                        <p class="publication-authors">{{ publication.authors }}</p>
                        <a href="{{ publication.url }}" target="_blank" rel="noopener noreferrer" class="publication-link">Read More →</a>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div class="publication-controls">
                <button class="pub-nav-btn pub-prev" aria-label="Previous">‹</button>
                <button class="pub-nav-btn pub-next" aria-label="Next">›</button>
            </div>
        </div>
    </div>
</section>

<!-- Experiences Section -->
<section id="experiences" class="experiences-section">
    <div class="container">
        <h2 class="section-title">Experiences</h2>
        <div class="experiences-grid">
            {% for experience in experiences %}
            <div class="experience-card">
                <div class="experience-card-inner">
                    <div class="experience-front">
                        <h3 class="experience-title">{{ experience.title }}</h3>
                    </div>
                    <div class="experience-back">
                        <p class="experience-description">{{ experience.description }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script>
// Disable browser scroll restoration
if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
}

// Smooth scrolling for navigation links
(function() {
    // Handle navigation link clicks for smooth scrolling
    document.addEventListener('DOMContentLoaded', function() {
        // Get all nav links with hash anchors
        const navLinks = document.querySelectorAll('.nav-link[href*="#"]');
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                const href = this.getAttribute('href');
                const hash = href.split('#')[1];
                
                // If we're on the homepage
                if (window.location.pathname === '/' || window.location.pathname === '{{ url_for("index") }}') {
                    // If it's the home link
                    if (this.id === 'home-link' || !hash) {
                        e.preventDefault();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        window.history.replaceState(null, null, window.location.pathname);
                        return false;
                    }
                    // For anchor links on homepage, let default behavior handle it (CSS smooth scroll)
                    // But ensure smooth scroll
                    if (hash) {
                        const target = document.getElementById(hash);
                        if (target) {
                            e.preventDefault();
                            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            // Update URL without triggering scroll
                            window.history.pushState(null, null, '#' + hash);
                            return false;
                        }
                    }
                }
                // If we're on another page, let the link navigate normally
                // The smooth scroll will happen after page load (handled below)
            });
        });
        
        // Handle hash on page load (for cross-page navigation)
        if (window.location.hash) {
            const hash = window.location.hash.substring(1);
            const target = document.getElementById(hash);
            if (target) {
                // Small delay to ensure page is fully loaded
                setTimeout(function() {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 100);
            }
        } else {
            // No hash - scroll to top
            window.scrollTo(0, 0);
        }
    });
    
    // Handle hash changes (e.g., browser back/forward)
    window.addEventListener('hashchange', function() {
        if (window.location.hash) {
            const hash = window.location.hash.substring(1);
            const target = document.getElementById(hash);
            if (target) {
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        } else {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });
    
    // Immediate scroll on page show (handles back/forward navigation)
    window.addEventListener('pageshow', function(event) {
        if (window.location.hash) {
            const hash = window.location.hash.substring(1);
            const target = document.getElementById(hash);
            if (target) {
                setTimeout(function() {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }, 50);
            }
        } else {
            window.scrollTo(0, 0);
        }
    });
})();
</script>
<script src="{{ url_for('static', filename='js/carousels.js') }}"></script>
<script src="{{ url_for('static', filename='js/publications.js') }}"></script>
<script src="{{ url_for('static', filename='js/flip-cards.js') }}"></script>
<script src="{{ url_for('static', filename='js/snow.js') }}"></script>
{% endblock %}

